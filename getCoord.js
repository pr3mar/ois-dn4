/**
 * Created by Марко on 08.12.2014.
 */
lekarne = {"seznam":[{"lekarna":"Centralna lekarna", "naslov":"Prešernov trg 5, 1000 Ljubljana", "telefon":"Telefon: 01/23-06-100", "odpiralni_cas":"od 7.30 do 19.30 ure."},{"lekarna":"Lekarna Bavarski dvor", "naslov":"Slovenska 55, 1000 Ljubljana", "telefon":"Telefon: 01/23-06-100", "odpiralni_cas":"od 7.00 do 19.00 ure."},{"lekarna":"Lekarna Bežigrad", "naslov":"Dunajska 23, 1000 Ljubljana", "telefon":"Telefon: 01/23-06-100", "odpiralni_cas":"od 8.00 do 19.00 ure."},{"lekarna":"Lekarna Bežigrajski dvor", "naslov":"Kržičeva 9, 1000 Ljubljana", "telefon":"Telefon: 01/23-06-100", "odpiralni_cas":"od 7.00 do 19.30 ure."},{"lekarna":"Lekarna Brdo", "naslov":"Cesta na Brdo 63, 1000 Ljubljana", "telefon":"Telefon: 01/23-06-100", "odpiralni_cas":"od 7.30 do 19.30 ure."},{"lekarna":"Lekarna Cerknica", "naslov":"Cesta 4. maja 17, 1380 Cerknica", "telefon":"Telefon: 01/23-06-100", "odpiralni_cas":"od 7.15 do 19.15 ure."},{"lekarna":"Lekarna Cerkno", "naslov":"Ličarjeva ulica 7, 5282 Cerkno", "telefon":"Telefon: 01/23-06-100", "odpiralni_cas":"od 9.00 do 18.00 ure."},{"lekarna":"Lekarna Citipark", "naslov":"Šmartinska cesta 152 G, 1000 Ljubljana", "telefon":"Telefon: 01/23-06-100", "odpiralni_cas":"od 9.00 do 21.00 ure."},{"lekarna":"Lekarna Črnuče", "naslov":"Primožičeva 2, 1000 Ljubljana", "telefon":"Telefon: 01/23-06-100", "odpiralni_cas":"od 7.00 do 19.30 ure."},{"lekarna":"Lekarna Fužine", "naslov":"Preglov trg 14, 1000 Ljubljana", "telefon":"Telefon: 01/23-06-100", "odpiralni_cas":"od 7.15 do 19.30 ure."},{"lekarna":"Lekarna Grosuplje", "naslov":"Adamičeva 8, 1290 Grosuplje", "telefon":"Telefon: 01/23-06-100", "odpiralni_cas":"od 7.00 do 19.30 ure."},{"lekarna":"Lekarna Idrija", "naslov":"Arkova 4, 5280 Idrija", "telefon":"Telefon: 01/23-06-100", "odpiralni_cas":"od 7.15 do 19.30 ure."},{"lekarna":"Lekarna Ivančna Gorica", "naslov":"Cesta 6. junija 12, 1295 Ivančna Gorica", "telefon":"Telefon: 01/23-06-100", "odpiralni_cas":"od 7.00 do 19.30 ure."},{"lekarna":"Lekarna Koseze", "naslov":"Ulica Bratov Učakar 58, 1000 Ljubljana", "telefon":"Telefon: 01/23-06-100", "odpiralni_cas":"od 7.30 do 19.00 ure."},{"lekarna":"Lekarna Levstik", "naslov":"Levstikov trg 9, 1000 Ljubljana", "telefon":"Telefon: 01/23-06-100", "odpiralni_cas":"od 9.00 do 17.00 ure."},{"lekarna":"Lekarna Logatec", "naslov":"Notranjska 2, 1370 Logatec", "telefon":"Telefon: 01/23-06-100", "odpiralni_cas":"od 7.00 do 19.30 ure."},{"lekarna":"Lekarna Lukovica", "naslov":"Stari trg 4, 1225 Lukovica", "telefon":"Telefon: 01/23-06-100", "odpiralni_cas":"od 7.00 do 19.00 ure."},{"lekarna":"Lekarna Medvode", "naslov":"Donova 1, 1215 Medvode", "telefon":"Telefon: 01/23-06-100", "odpiralni_cas":"od 7.30 do 19.30 ure."},{"lekarna":"Lekarna Metelkova", "naslov":"Metelkova 9, 1000 Ljubljana", "telefon":"Telefon: 01/23-06-100", "odpiralni_cas":"od 7.00 do 19.30 ure."},{"lekarna":"Lekarna Miklošič", "naslov":"Miklošičeva ulica 24, 1000 Ljubljana", "telefon":"Telefon: 01/23-06-100", "odpiralni_cas":"od 7.30 do 19.30 ure."},{"lekarna":"Lekarna Mirje", "naslov":"Trg MDB 2, 1000 Ljubljana", "telefon":"Telefon: 01/23-06-100", "odpiralni_cas":"pon-pet: 7.30-20.00"},{"lekarna":"Lekarna Moste", "naslov":"Rojčeva ulica 22, 1000 Ljubljana", "telefon":"Telefon: 01/23-06-100", "odpiralni_cas":"od 7.30 do 19.30 ure."},{"lekarna":"Lekarna Nove Jarše", "naslov":"Kvedrova cesta 31, 1000 Ljubljana", "telefon":"Telefon: 01/23-06-100", "odpiralni_cas":"od 7.30 do 19.30 ure."},{"lekarna":"Lekarna Polje", "naslov":"Cesta 30. avgusta 2, 1000 Ljubljana", "telefon":"Telefon: 01/23-06-100", "odpiralni_cas":"od 7.00 do 19.30 ure."},{"lekarna":"Lekarna pri polikliniki", "naslov":"Njegoševa cesta 6K, SI-1000 Ljubljana", "telefon":"Telefon: 01/23-06-100", "odpiralni_cas":"od 7.00 do 24.00 ure"},{"lekarna":"Lekarna pri šišenski knjižnici", "naslov":"Trg komandanta Staneta 8, 1000 Ljubljana", "telefon":"Telefon: 01/23-06-100", "odpiralni_cas":"od 8.00 do 19.30 ure."},{"lekarna":"Lekarna Rakovnik", "naslov":"Rakovniška ulica 4a, 1000 Ljubljana", "telefon":"Telefon: 01/23-06-100", "odpiralni_cas":"od 7.00 do 19.30 ure."},{"lekarna":"Lekarna Šentvid", "naslov":"Prušnikova 45, 1000 Ljubljana", "telefon":"Telefon: 01/23-06-100", "odpiralni_cas":"od 7.15 do 19.15 ure."},{"lekarna":"Lekarna Šiška", "naslov":"Celovška 83, 1000 Ljubljana", "telefon":"Telefon: 01/23-06-100", "odpiralni_cas":"od 7.30 do 19.30 ure."},{"lekarna":"Lekarna Škofljica", "naslov":"Kočevska cesta 25a, 1291 Škofljica", "telefon":"Telefon: 01/23-06-100", "odpiralni_cas":"od 7.30 do 19.30 ure."},{"lekarna":"Lekarna Sončni dvori", "naslov":"Brezje pri Grosupljem 74, 1290 Grosuplje", "telefon":"Telefon: 01/23-06-100", "odpiralni_cas":"od 10.00 do 18.00 ure."},{"lekarna":"Lekarna Supernova", "naslov":"Jurčkova c. 223, 1000 Ljubljana", "telefon":"Telefon: 01/23-06-100", "odpiralni_cas":"od 9.00 do 21.00 ure."},{"lekarna":"Lekarna Trnovo", "naslov":"Devinska ulica 1a, 1000 Ljubljana", "telefon":"Telefon: 01/23-06-100", "odpiralni_cas":"od 7.30 do 19.30 ure."},{"lekarna":"Lekarna Trzin", "naslov":"Ljubljanska cesta 13c, 1236 Trzin", "telefon":"Telefon: 01/23-06-100", "odpiralni_cas":"od 8.00 do 19.00 ure."},{"lekarna":"Lekarna Vič", "naslov":"Šestova ulica 10, 1000 Ljubljana", "telefon":"Telefon: 01/23-06-100", "odpiralni_cas":"od 7.15 do 19.15 ure."},{"lekarna":"Lekarna Vnanje Gorice", "naslov":"Nova pot 5, 1351 Brezovica", "telefon":"Telefon: 01/23-06-100", "odpiralni_cas":"od 7.30 do 19.30 ure."},{"lekarna":"Lekarna Vrhnika", "naslov":"Trg Karla Grabeljška 1, 1360 Vrhnika", "telefon":"Telefon: 01/23-06-100", "odpiralni_cas":"od 7.00 do 19.00 ure."},{"lekarna":"Lekarna Zlatica Vrhnika", "naslov":"Ljubljanska cesta 29, 1360 Vrhnika", "telefon":"Telefon: 01/23-06-100", "odpiralni_cas":"od 8.00 do 20.00 ure."},{"lekarna":"Lekarniška podružnica Bloke", "naslov":"Nova vas 4a, 1385 Nova vas", "telefon":"Telefon: 01/23-06-100", "odpiralni_cas":"od 8.00 do 12.00 ure."},{"lekarna":"Lekarniška podružnica Borovnica", "naslov":"Mejačeva 3, 1353 Borovnica", "telefon":"Telefon: 01/23-06-100", "odpiralni_cas":"od 8.00 do 16.00 ure"},{"lekarna":"Lekarniška podružnica Dobrepolje", "naslov":"Videm 37a, 1312 Videm-Dobrepolje", "telefon":"Telefon: 01/23-06-100", "odpiralni_cas":"od 7.30 do 14.30 ure."},{"lekarna":"Lekarniška podružnica Horjul", "naslov":"Slovenska cesta 17, 1354 Horjul", "telefon":"Telefon: 01/23-06-100", "odpiralni_cas":"od 11. do 19. ure."},{"lekarna":"Lekarniška podružnica Podpeč", "naslov":"Jezero 1, 1352 Preserje", "telefon":"Telefon: 01-23-06-100", "odpiralni_cas":"od 13.00 do 19.30 ure."},{"lekarna":"Lekarniška podružnica Stari trg pri Ložu", "naslov":"Cesta notranjskega odreda 36a, 1386 Stari trg", "telefon":"Telefon: 01/23-06-100", "odpiralni_cas":"od 8.00 do 17.00 ure."},{"lekarna":"Lekarniška podružnica Velike Lašče", "naslov":"Javorškova 7, 1315 Velike Lašče", "telefon":"Telefon: 01/23-06-100", "odpiralni_cas":"od 7.30 do 19.00 ure."},{"lekarna":"Nova lekarna Postojna", "naslov":"Tržaška cesta 59, 6230 Postojna", "telefon":"Telefon: 01/23-06-100", "odpiralni_cas":"od 9.00 do 17.00 ure."}]};
var nextAddress = 0;
function getCoord(address, next) {
    var geocoder =  new google.maps.Geocoder();
    geocoder.geocode({address:address}, function (results, status) {
        if(status == google.maps.GeocoderStatus.OK) {
            var lat = results[0].geometry.location.lat();
            var lng = results[0].geometry.location.lng();
            lekarne.seznam.forEach(function (element) {
                if(element.naslov == address){
                    element.lat = lat;
                    element.lng = lng;
                    return;
                }
            })
            $("#rez").append("<div id='"+address+"'>" +lat + " " + lng + "</div>");
            next();
        } else {
            console.log(status);
            //$("#rez").append("<div id='obj'>"+ lekarne.toString() + "</div>");
            var url = 'data:text/json;charset=utf8,' + encodeURIComponent(lekarne);
            window.open(url, '_blank');
            window.focus();
        }
    });
}
function theNext() {
    if (nextAddress < lekarne.seznam.length) {
        setTimeout('getCoord("'+lekarne.seznam[nextAddress].naslov+'",theNext)', 800);
        nextAddress++;
    } else {
        // We're done. Show map bounds
        console.log("finish");
        console.log(lekarne);
    }
}


$(document).ready(function(){
    theNext();

})